<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Mapping with D3</title>
    <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="neighborhoods.json"></script>
    <script src="data/rodents.json"></script>
    <style>
        body {
            position: absolute;
        }
        h1, h3 {
            position: absolute;
            left: 15px;
            font-size: 1.3em;
            font-weight: 100;
        }
        h3 {
            top: 30px;
            font-size: 1.1em;
        }
        .incident {
            fill: yellowgreen;
        }
        .hover {
            fill: yellow;
        }
    </style>
</head>
<body>
    <h1>Reported Incidents</h1>
    <h3></h3>
    <script>
        var width = 700;
        var height = 550;

        var svg = d3.select("body")
            .append('svg')
            .attr('width', width)
            .attr('height', height);

        var g = svg.append('g');
        
        var albersProjection = d3.geoAlbers()
            .scale(190000)
            .rotate([71.057, 0])
            .center([0,42.313])
            .translate([width/2, height/2]);

        var geoPath = d3.geoPath()
            .projection(albersProjection);

        g.selectAll("path")
            .data(neighborhoods_json.features)
            .enter()
            .append("path")
            .attr("fill","#ccc")
            .attr("stroke", "#333")
            .attr("d", geoPath);

        var rodents = svg.append("g");

        rodents.selectAll("path")
            .data(rodents_json.features)
            .enter()
            .append("path")
            .attr("fill", "#900")
            .attr("stroke", "#999")
            .attr("d", geoPath)
            .attr("class", "incident")
            .on("mouseover", function(d) {
                d3.select("h3").text(d.properties.LOCATION_STREET_NAME);
                d3.select(this).attr("class", "incident hover");
            })
            .on("mouseout", function (d) {
                d3.select("h3").text("");
                d3.select(this).attr("class", "incident");
            });


    </script>
</body>
</html>